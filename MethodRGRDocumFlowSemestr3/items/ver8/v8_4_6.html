<html>
<head>
    <title>Об’єктно-орієнтоване програмування</title>
    <link rel="stylesheet" type="text/css" href="../../source/style.css">
</head>
<body background="../../source/background.jpg";>
<h1 align=center>Об’єктно-орієнтоване програмування</h1>
<table border="0" class="menu1" >
			<tr>
				<td><a href="../ver1/v1_1.html"><img border="0" src="../../source/v1.png"></a></td>
                <td><a href="../ver2/v2_1.html"><img border="0" src="../../source/v2.png"></a></td>
                <td><a href="../ver3/v3_1.html"><img border="0" src="../../source/v3.png"></a></td>
                <td><a href="../ver4/v4_1.html"><img border="0" src="../../source/v4.png"></a></td>
                <td><a href="../ver5/v5_1.html"><img border="0" src="../../source/v5.png"></a></td>
                <td><a href="../ver6/v6_1.html"><img border="0" src="../../source/v6.png"></a></td>
                <td><a href="../ver7/v7_1.html"><img border="0" src="../../source/v7.png"></a></td>
                <td><a href="../ver8/v8_1.html"><img border="0" src="../../source/v8.png"></a></td>
			</tr>
</table>
<table border="0" class="menu2">
			<tr>
				<td><a href="v8_1.html"><img border="0" src="../../source/m1.png"></a></td>
			</tr>
			<tr>
				<td><a href="v8_2.html"><img border="0" src="../../source/m2.png"></a></td>
			</tr>
            <tr>
				<td><a href="v8_3.html"><img border="0" src="../../source/m3.png"></a></td>
			</tr>
			<tr>
				<td><a href="v8_4.html"><img border="0" src="../../source/m4.png"></a></td>
			</tr>
            <tr>
				<td><a href="v8_5.html"><img border="0" src="../../source/m5.png"></a></td>
			</tr>
            <tr>
				<td><a href="v8_6.html"><img border="0" src="../../source/m6.png"></a></td>
			</tr>
            <tr>
				<td>&nbsp</td>
			</tr>
            <tr>
				<td>&nbsp</td>
			</tr>
            <tr>
				<td>&nbsp</td>
			</tr>
            <tr>
				<td><a href="../rating.html"><img border="0" src="../../source/m7.png"></a></td>
			</tr>
            <tr>
				<td><a href="../requir.html"><img border="0" src="../../source/m7.png"></a></td>
			</tr>
</table>
<a href="../../main.html"><img border="0" class="home" src="../../source/home.png"></a>
<div class="text">
<h3><u>Технологія розробки даної версії</u></h3>
<h4>Специфікація функцій для даної версії</h4>

<pre id="main">
<font color="#0000ff">int</font> main()
{
	{
		<font color="#0000ff">char</font> answ;
		<font color="#0000ff">do</font>{
		system(<font color="#ff0000">"cls"</font>);
		cout<<<font color="#ff0000">"****************Demonstration starts****************"</font><< endl<< endl;
		<font color="#00b050">// створення годинника</font>
		Clock clock; 
		<font color="#00b050">// створення МТБ</font>
		MTDB database; 
		Catalog firmList;
		
		VNZ univ("Kyiv", "Ivanov"); <font color="#00b050">// створення ВНЗ</font>
		Firm suplier("Rozetka","UA","(044)123-45-67"); <font color="#00b050">// створення фірми-постачальника</font>

		clock.SetUniv(&univ); <font color="#00b050">// зв*язка годинника з ВНЗ</font>
		univ.SetBase(&database); <font color="#00b050">// зв*язка бази з ВНЗ</font>
		univ.SetFirm(&suplier); <font color="#00b050">// зв*язка ВНЗ з фірмою</font>
		suplier.SetCl(&clock);
		suplier.SetList(&firmList);

		<font color="#00b050">// виведення початкової інформації про фірму і ВНЗ</font>
		univ.show();
		suplier.show();
		<font color="#00b050">// запуск моделювання</font>
		clock.Modeling();
		cout<< endl<<<font color="#ff0000">"\n****************Demonstration ends****************"</font><< endl;
		cout<< endl<<<font color="#ff0000">"Repeat the demonstration? ('y' for \"yes\", any key for exiting) "</font>;
		cin>>answ;
		} <font color="#0000ff">while</font>(answ==<font color="#ff0000">'y'</font>);
	}
}
</pre>
<a href="v8_4_5.html#tab"><sub><font color="#525252">[до таблиці]</font></sub></a>

<pre id="add">
<font color="#00b050">// додати товар у базу</font>
<font color="#0000ff">void</font> MTDB::add(VNZ university, Firm* suplier, <font color="#0000ff">int </font>br)
{
	string name, temp; 
	cout<<<font color="#ff0000">"Chosing the product from the catalog. \nInput name of the catalog file: "</font>;
	<font color="#0000ff">char </font>nameFile[20];
	cin>>nameFile;
	<font color="#0000ff">try</font> {
	<font color="#0000ff">if</font> (!(fopen(nameFile,"r"))) <font color="#0000ff">throw </font>Error(1,nameFile); <font color="#00b050">// якщо файлу з таким ім*ям не існує</font>
	}
	<font color="#0000ff">catch</font> (Error e) <font color="#00b050">// обробка виключної ситуації</font>
	{
		e.err(nameFile);
	}
	(*(*suplier).GetList()).create(nameFile);
	(*(*suplier).GetList()).show(nameFile);
	cout<<<font color="#ff0000">"Input name of product you wish to buy: "</font>;
	cin>>name;
	<font color="#0000ff">int</font> n=(*(*suplier).GetList()).find(name);
	<font color="#0000ff">while </font>(n==-1)
	{
		<font color="#0000ff">char</font> answ;
		cout<<<font color="#ff0000">"Incorrect name. Try again please. \nDo you want to see the catalog again? (any key for \"yes\", \"n\" for \"no\") "</font>;
		cin>>answ;
		<font color="#0000ff">if</font> (answ!='n') {(*(*suplier).GetList()).show(nameFile);}
		cout<<<font color="#ff0000">"Name of product: "</font>;
		cin>>name;
		n=(*(*suplier).GetList()).find(name);
	}
	TMC prod=(*(*suplier).GetList())[n]; <font color="#00b050">// створити новий товар</font>
	prod.SetSup(suplier);
	<font color="#0000ff">bool</font> sp;
	prod.isSpoil(&sp);
	<font color="#0000ff">try</font>{
	<font color="#0000ff">if </font>(sp==true) <font color="#0000ff">throw</font> Error(2,nameFile); <font color="#00b050">// якщо товар зіпсований</font>
	<font color="#00b050">// якщо товар не зіпсований</font>
	cout<< endl<< prod.GetName()<<<font color="#ff0000">" by "</font><< prod.GetMfr()<<<font color="#ff0000">" is buying now."</font><< endl; <font color="#00b050">// якщо згенеровано необхідні для придбання документи</font>
	fflush(stdin); getch();
	prod.CreateDocs(1,9,university, *suplier,br); <font color="#00b050">// викликати функцію додавання документів (придбання)</font>
	<font color="#0000ff">if</font> (br-1>8) { 
		cout<< endl<< prod.GetName()<<<font color="#ff0000">" by "</font><< prod.GetMfr()<<<font color="#ff0000">" was cashed."</font><< endl;<font color="#00b050"> // якщо згенеровано необхідні для придбання документи</font>
		listProd.push_back(prod); <font color="#00b050">// додати в кінець списка новий товар</font>
		cout<< listProd.back().GetName()<<<font color="#ff0000">" by "</font><< listProd.back().GetMfr()<<<font color="#ff0000">" was added to a database.\n"</font><< endl;fflush(stdin); getch();} <font color="#00b050">// вивети повідомлення про придбання</font>
	} 
	<font color="#0000ff">catch</font> (Error e) <font color="#00b050">// обробка виключної ситуації</font>
	{
		e.err(nameFile);
	}
}
</pre>
<a href="v8_4_5.html#tab"><sub><font color="#525252">[до таблиці]</font></sub></a>

<pre id="create">
<font color="#00b050">// створити каталог</font>
<font color="#0000ff">void</font> Catalog::create(<font color="#0000ff">char</font>* nameFile)
{
	cout<<<font color="#ff0000">"***********Creating the catalog of suplier***********"</font><< endl;
	FILE *fin;
	fin=fopen(nameFile,<font color="#ff0000">"r"</font>);
	<font color="#0000ff">char </font>name[20];
	<font color="#0000ff">char </font>type[20];
	<font color="#0000ff">char</font> mfr[20];
	<font color="#0000ff">float</font> price;
	<font color="#0000ff">char </font>data[10];
	<font color="#0000ff">while</font> (!feof(fin))
	{
		<font color="#0000ff">try</font>{
			fscanf(fin,<font color="#ff0000">"%s %s %s %f %s"</font>,&name,&type,&mfr,&price,&data);  
			TMC prod(string(name), string(type), price, supl, string(mfr), string(data));
			listProd.push_back(prod); <font color="#00b050">// додати в кінець списка новий товар</font>
			<font color="#0000ff">if</font> (listProd.size()==20) <font color="#0000ff">throw</font> Error(3,nameFile); <font color="#00b050">// якщо до каталогу намагаються додати більш ніж 20 товарів</font>
		}
	<font color="#0000ff">catch </font>(Error e)	{e.err(nameFile); <font color="#0000ff">break</font>;}
	}
	fclose(fin);
	cout<<<font color="#ff0000">"***********The catalog has been created***********"</font><< endl;
}
</pre>
<a href="v8_4_5.html#tab"><sub><font color="#525252">[до таблиці]</font></sub></a>

<pre id="file">
<font color="#0000ff">void</font> Error::file(<font color="#0000ff">char</font>* n) <font color="#00b050">// не існує такий файл</font>
   {
 	<font color="#0000ff">while</font> (!(fopen(n,<font color="#ff0000">"r"</font>))){
		cout<<<font color="#ff0000">"Such file do not exist. Try again please. \nInput name of the catalog file: "</font>;
		cin>>n;
	}
}
</pre>
<a href="v8_4_5.html#tab"><sub><font color="#525252">[до таблиці]</font></sub></a>

<pre id="expiry">
<font color="#0000ff">void</font> Error::expiry() <font color="#00b050">// закінчився термін придатності</font>
{
	cout<<<font color="#ff0000">"This product can't be added because it has passed the expiry date."</font><< endl; <font color="#00b050">// вивести повідомлення про неможливість продовжити придбання</font>
}
</pre>
<a href="v8_4_5.html#tab"><sub><font color="#525252">[до таблиці]</font></sub></a>

<pre id="size">
<font color="#0000ff">void</font> Error::size() <font color="#00b050">// переповнений список</font>
{
	cout<<<font color="#ff0000">"20 products have been added. You can not add more items."</font><< endl; <font color="#00b050">// вивести повідомлення про неможивість поповнення каталогу</font>
}
</pre>
<a href="v8_4_5.html#tab"><sub><font color="#525252">[до таблиці]</font></sub></a>

<pre id="err">
<font color="#0000ff">void</font> Error::err(<font color="#0000ff">char</font>* nameFile) <font color="#00b050">// вибір типу помилки</font>
{
	<font color="#0000ff">switch</font>(type)
	{
  	<font color="#0000ff">case</font> 1: file(nameFile);<font color="#0000ff">break</font>;
	<font color="#0000ff">case</font> 2: expiry();<font color="#0000ff">break</font>;
	<font color="#0000ff">case</font> 3: size();<font color="#0000ff">break</font>;
	}
}
</pre>
<a href="v8_4_5.html#tab"><sub><font color="#525252">[до таблиці]</font></sub></a>

<pre id="Error">
<font color="#00b050">// конструктор ініціалізації</font>
Error(<font color="#0000ff">int</font> t, <font color="#0000ff">char</font> name[20]):  type(t) {strcpy(nameFile,name);} 
</pre>
<a href="v8_4_5.html#tab"><sub><font color="#525252">[до таблиці]</font></sub></a>


<a href="v8_4.html"><sub><font color="#525252"><br /><br />[повернутися]<br /><br /></font></sub></a>
</div>
</body>
</html>